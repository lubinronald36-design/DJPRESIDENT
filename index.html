<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>MyChillingTime ‚Äî FINAL</title>

<style>
body{margin:0;padding:20px;font-family:system-ui,Arial;background:#0b0d12;color:#eaeaff}
.wrap{max-width:900px;margin:auto}
h1{margin:0 0 6px}
.muted{color:#aab3d6}
.card{background:#141826;border:1px solid rgba(255,255,255,.12);border-radius:16px;padding:14px;margin:12px 0}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
button{padding:10px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.12);color:#fff;font-weight:800;cursor:pointer}
button:disabled{opacity:.5}
.primary{background:#fff;color:#0b0d12;border-color:transparent}
.danger{background:rgba(255,77,77,.18);border-color:rgba(255,77,77,.35)}
.pill{display:inline-flex;gap:8px;align-items:center;padding:8px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.12)}
input[type=range]{width:160px}
kbd{display:inline-block;min-width:28px;text-align:center;padding:6px 8px;margin:2px;border-radius:10px;border:1px solid rgba(255,255,255,.14)}
.status{margin-top:10px;font-size:13px;color:#aab3d6}
.mono{font-family:ui-monospace,monospace}
audio{width:100%}
</style>
</head>

<body>
<div class="wrap">
<h1>MyChillingTime ‚Äî FINAL</h1>

<p class="muted">
Files in same folder:
<b>bott.mp3</b>,
<b>dj-elvis-dante.wav</b>,
<b>boom.wav</b>
</p>

<div class="card">
  <div class="row">
    <button id="startBeat" class="primary">‚ñ∂ Start Beat</button>
    <button id="stopBeat" class="danger" disabled>‚ñ† Stop Beat</button>

    <span class="pill">
      Beat Vol
      <input id="beatVol" type="range" min="0" max="1" step="0.01" value="0.75">
      <span id="beatVolLabel">0.75</span>
    </span>

    <span class="pill">
      Key Vol
      <input id="keyVol" type="range" min="0" max="1" step="0.01" value="0.55">
      <span id="keyVolLabel">0.55</span>
    </span>
  </div>
  <div class="status" id="status">Status: ready</div>
</div>

<div class="card">
  <button id="elvisBtn" class="primary">üéôÔ∏è ELVIS</button>
  <button id="boomBtn">üí• BOOM</button>
</div>

<div class="card">
  <p class="muted"><b>Keyboard</b></p>
  <kbd>A</kbd><kbd>S</kbd><kbd>D</kbd><kbd>F</kbd><kbd>G</kbd><kbd>H</kbd><kbd>J</kbd><kbd>K</kbd><kbd>L</kbd>
  <kbd>Q</kbd><kbd>W</kbd><kbd>E</kbd><kbd>R</kbd><kbd>T</kbd><kbd>Y</kbd><kbd>U</kbd><kbd>I</kbd><kbd>O</kbd><kbd>P</kbd>
</div>

<div class="card">
  <button id="recBtn" class="primary">‚è∫ Start Recording</button>
  <button id="stopRecBtn" class="danger" disabled>‚èπ Stop & Save</button>
  <div class="status" id="recStatus">Recorder: idle</div>
  <audio id="playback" controls></audio>
  <a id="download" style="display:none">‚¨á Download</a>
</div>
</div>

<script>
const BEAT_FILE="bott.mp3";
const ELVIS_FILE="dj-elvis-dante.wav";
const BOOM_FILE="boom.wav";

const beat=new Audio(BEAT_FILE); beat.loop=true;
const elvis=new Audio(ELVIS_FILE);
const boom=new Audio(BOOM_FILE);

const beatVol=document.getElementById("beatVol");
const keyVol=document.getElementById("keyVol");
const beatVolLabel=document.getElementById("beatVolLabel");
const keyVolLabel=document.getElementById("keyVolLabel");
const statusEl=document.getElementById("status");

let ctx;
function ac(){ if(!ctx) ctx=new AudioContext(); return ctx }

function playKey(){
  const o=ac().createOscillator();
  const g=ac().createGain();
  o.frequency.value=300+Math.random()*800;
  g.gain.value=keyVol.value*0.18;
  o.connect(g).connect(ac().destination);
  o.start(); o.stop(ac().currentTime+0.12);
}

new Set("ASDFGHJKLQWERTYUIOP".split(""))
&& window.addEventListener("keydown",e=>{
  if("ASDFGHJKLQWERTYUIOP".includes(e.key.toUpperCase())) playKey();
});

beatVol.oninput=()=>{beat.volume=beatVol.value;beatVolLabel.textContent=beatVol.value}
keyVol.oninput=()=>keyVolLabel.textContent=keyVol.value;

document.getElementById("startBeat").onclick=async()=>{
  ac().resume(); beat.currentTime=0; await beat.play();
  statusEl.textContent="Status: playing";
};
document.getElementById("stopBeat").onclick=()=>{
  beat.pause(); beat.currentTime=0; statusEl.textContent="Status: stopped";
};

elvisBtn.onclick=()=>{ac().resume(); elvis.currentTime=0; elvis.play()}
boomBtn.onclick=()=>{ac().resume(); boom.currentTime=0; boom.play()}

let rec, chunks=[], stream;
recBtn.onclick=async()=>{
  stream=await navigator.mediaDevices.getUserMedia({audio:true});
  rec=new MediaRecorder(stream);
  chunks=[];
  rec.ondataavailable=e=>chunks.push(e.data);
  rec.onstop=()=>{
    const url=URL.createObjectURL(new Blob(chunks));
    playback.src=url;
    download.href=url;
    download.download="mychillingtime.webm";
    download.style.display="block";
    stream.getTracks().forEach(t=>t.stop());
  };
  rec.start();
};
stopRecBtn.onclick=()=>rec.stop();
</script>
</body>
</html>
